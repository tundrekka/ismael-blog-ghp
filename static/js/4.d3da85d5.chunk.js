(this["webpackJsonpblog-ts-app"]=this["webpackJsonpblog-ts-app"]||[]).push([[4],{54:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(59);n.d(t,"b",(function(){return r.a}));n(70),n(67);r.a.initializeApp({apiKey:"AIzaSyDGgRA_or_P7wxc7Ty4HmgaUWTOki5x8Rs",authDomain:"blog-ea896.firebaseapp.com",projectId:"blog-ea896",storageBucket:"blog-ea896.appspot.com",messagingSenderId:"798740354455",appId:"1:798740354455:web:d30b7cd170351c3822a0d2"});var c=r.a.firestore()},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r,c=n(69),a=n(55),o=n.n(a),i=n(12),s=n(56),u=n(54),d=n(24),l=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.collection("".concat(d.a.dbRoot)).orderBy("date","desc").limit(2).get();case 3:return t=e.sent,r=t.docs[t.docs.length-1]||null,n=[],t.forEach((function(e){n.push(Object(i.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(o.a.mark((function e(t,n,a,s){var l,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,u.a.collection("".concat(d.a.dbRoot)).orderBy("date","desc").startAfter(r).limit(2).get();case 3:l=e.sent,r=l.docs[l.docs.length-1]||null,b=[],l.forEach((function(e){b.push(Object(i.a)({id:e.id},e.data()))})),0===(j=b).length&&s(!0),a(!1),n([].concat(Object(c.a)(t),j));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}()},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return b}));var r,c,a,o,i=n(4),s=n(2),u=s.d.div(r||(r=Object(i.a)(["\n   border-radius: ",";\n   background-image: url(",");\n   background-color: ",";\n   background-position: center center;\n   margin: ",";\n   background-size: 110%;\n   transition: background-size 150ms ease-in-out;\n   ","\n\n   box-shadow: ",";\n\n   &:hover,\n   &:focus,\n   &:focus-visible,\n   &:focus-within {\n      ","\n      box-shadow: ",";\n   }\n\n   .card-container {\n      outline: none;\n      background-color: rgba(0, 0, 0, 0.7);\n      border-radius: ",";\n      min-height: 150px;\n      color: ",";\n      cursor: pointer;\n      display: block;\n      padding: 1em 0.7em;\n      transition: background-color 150ms ease;\n      &:hover {\n         background-color: rgba(0, 0, 0, 0.3);\n      }\n\n      .continue-reading-link {\n         font-size: 0.9rem;\n         color: lightblue;\n      }\n   }\n"])),(function(e){return e.theme.border_radius}),(function(e){return e.imageUrl}),(function(e){return e.theme.palette.card_bg}),(function(e){return e.margin||"0 0.7em 1em"}),(function(e){return e.sidebar&&"background-size: cover;"}),(function(e){return e.theme.palette.dark?"1px 1px 4px .5px #494949a2":"1px 1px 4px .5px black"}),(function(e){return!e.sidebar&&"background-size: 105%;"}),(function(e){return e.theme.palette.dark?"0 0 5.5px #ffffffba":"0 0 4px 2px #000"}),(function(e){return e.theme.border_radius||"6px"}),(function(e){return e.theme.palette.text_gray_dark})),d=s.d.h3(c||(c=Object(i.a)(["\n   margin-bottom: 0.6em;\n   font-size: 1.4rem;\n   color: ",";\n"])),(function(e){return e.theme.palette.posts_card_title})),l=s.d.p(a||(a=Object(i.a)(["\n   font-size: 1rem;\n   margin-bottom: 0.2em;\n   color: ",";\n"])),(function(e){return e.theme.palette.text_gray})),b=s.d.p(o||(o=Object(i.a)(["\n   color: ",";\n   margin-bottom: 0.9em;\n   font-size: 0.925rem;\n"])),(function(e){return e.theme.palette.text_white}))},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),c=n(57),a=n(0),o=function(){var e=Object(a.useContext)(r.a),t=e.posts,n=e.setPosts;return Object(a.useEffect)((function(){t.length<1&&Object(c.a)().then((function(e){n(e)})).catch((function(){return console.log("error obteniendo posts")}))}),[t,n]),{posts:t,setPosts:n}}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(62),c=n.n(r),a=n(11),o=n(58),i=n(1),s=function(e){var t=e.title,n=(e.id,e.date),r=e.excerpt,s=e.path,u=e.imageUrl,d=e.margin,l=e.sidebar;return Object(i.jsx)(o.a,{sidebar:l,imageUrl:u,margin:d,children:Object(i.jsxs)(a.b,{to:s,className:"card-container",children:[Object(i.jsx)(o.d,{className:"title",children:t}),Object(i.jsx)(o.b,{className:"date",children:c()(n).format("MMM Do YY")}),Object(i.jsx)(o.c,{className:"excerpt",children:r}),Object(i.jsx)("p",{className:"continue-reading-link",children:"Continue Reading..."})]})})}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(9),c=n(13),a=n(27),o=n(23),i=n(57),s=n(0),u=n(26),d=n(1),l=function(){var e=Object(s.useContext)(o.a),t=e.posts,n=e.setPosts,l=Object(s.useContext)(a.a),b=l.noMorePosts,j=l.setNoMorePosts,p=Object(s.useState)(!1),h=Object(r.a)(p,2),m=h[0],f=h[1];return Object(s.useEffect)((function(){0===t.length?f(!0):f(!1)}),[t.length]),Object(d.jsx)("div",{style:{textAlign:"center",marginTop:".25em",marginBottom:".25em"},children:m?Object(d.jsx)("div",{style:{height:"1.8em",position:"relative"},children:Object(d.jsx)(u.a,{})}):m||b?b&&Object(d.jsx)("h4",{children:"No more posts"}):Object(d.jsx)(c.a,{disabled:m,onClick:function(){Object(i.b)(t,n,f,j)},children:"Load More posts!"})})}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(55),c=n.n(r),a=n(56),o=n(54),i=n(24),s=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.doc("".concat(i.a.dbRoot,"/").concat(t)).get();case 3:if((n=e.sent).data()){e.next=6;break}throw new Error("error fetching");case 6:return e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.warn(e.t0.message),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},80:function(e,t,n){"use strict";n.r(t);var r,c,a,o=n(9),i=n(3),s=n(4),u=n(2),d=n(1),l=u.d.div(r||(r=Object(s.a)(["\n   background-color: ",";\n   padding: 1em 0;\n   max-width: 94vw;\n   margin: 0 auto;\n   padding-top: 10vh;\n   min-height: 86.6vh;\n\n   @media (min-width: 992px) {\n      max-width: 85vw;\n   }\n"])),(function(e){return e.theme.palette.themeMode.body_bg})),b=function(e){var t=e.children;return Object(d.jsx)(l,{children:t})},j=n(29),p=n(12),h=n(0),m=function(e){var t=Object(h.useState)(e),n=Object(o.a)(t,2),r=n[0],c=n[1];return[r,function(e){c(Object(p.a)(Object(p.a)({},r),{},Object(j.a)({},e.target.name,e.target.value)))},function(){c(e)}]},f=n(55),O=n.n(f),x=n(56),g=n(13),v=u.d.form(c||(c=Object(s.a)(["\n   input {\n      width: 100%;\n      font-size: 1.025rem;\n      margin-bottom: 0.75em;\n   }\n   .content textarea {\n      width: 100%;\n      font-size: 0.82rem;\n   }\n\n   .featured > div {\n      label,\n      input {\n         display: block;\n         width: 100%;\n         text-align: center;\n         cursor: pointer;\n      }\n      &:first-of-type {\n         border-bottom: 1px solid whitesmoke;\n      }\n   }\n"]))),w=Object(h.memo)((function(e){var t=e.formValues,n=e.handleInputChange,r=e.submitCallback,c=e.resetForm,a=e.postId,i=Object(h.useState)(!1),s=Object(o.a)(i,2),u=s[0],l=s[1],b=t.title,j=t.content,p=t.excerpt,m=t.imageUrl;return Object(d.jsxs)("div",{children:[u&&Object(d.jsx)("h4",{children:"Success!!"}),Object(d.jsxs)(v,{onSubmit:function(e){e.preventDefault(),""===b||""===j||""===p||b.length<5||j.length<5||p.length<5?console.warn("Invalid Inputs"):a?r(t,a):Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:n=e.sent,c&&n&&(c(),l(!0),setTimeout((function(){l(!1)}),3e3));case 4:case"end":return e.stop()}}),e)})))()},children:[Object(d.jsx)("div",{className:"title",children:Object(d.jsx)("input",{onChange:n,autoComplete:"off",name:"title",value:b,type:"text",placeholder:"title"})}),Object(d.jsx)("div",{className:"content",children:Object(d.jsx)("textarea",{onChange:n,value:j,name:"content",id:"content",cols:30,rows:10})}),Object(d.jsxs)("div",{className:"excerpt",children:[Object(d.jsx)("p",{children:"content"}),Object(d.jsx)("input",{onChange:n,name:"excerpt",value:p,type:"text",placeholder:"excerpt"})]}),Object(d.jsx)("div",{className:"imageUrl",children:Object(d.jsx)("input",{onChange:n,name:"imageUrl",value:m,type:"text",placeholder:"imageUrl"})}),Object(d.jsxs)("div",{className:"featured",children:[Object(d.jsx)("p",{children:"featured post?"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"true",children:"true"}),Object(d.jsx)("input",{value:"true",onChange:n,type:"radio",name:"featured",id:"true"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"false",children:"false"}),Object(d.jsx)("input",{value:"false",onChange:n,defaultChecked:!0,type:"radio",name:"featured",id:"false"})]})]}),Object(d.jsx)(g.a,{type:"submit",children:"Submit form"})]})]})})),k=n(54),y=n(24),C=function(){var e=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(p.a)(Object(p.a)({},t),{},{date:(new Date).getTime()}),e.next=4,k.a.collection("".concat(y.a.dbRoot)).add(n);case 4:return console.log("created"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),console.warn("error creating post");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=m({title:"",content:"",excerpt:"",imageUrl:"",featured:"false"}),t=Object(o.a)(e,3),n=t[0],r=t[1],c=t[2];return Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),Object(d.jsx)("p",{style:{margin:".3em 0",textAlign:"center"},children:"CREATE POST SCREEN"}),Object(d.jsx)("hr",{}),Object(d.jsx)(w,{formValues:n,handleInputChange:r,submitCallback:C,resetForm:c})]})};!function(e){e.login="/admin/login",e.create="/admin/create",e.update="/admin/update/:postId",e.delete="/admin/delete"}(a||(a={}));var A,S,N,_,z,E,P=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.b.auth().signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("something wrong happened");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),U=n(11),M=u.d.div(A||(A=Object(s.a)(["\n   display: flex;\n   align-items: center;\n   justify-content: space-between;\n   margin: .5em 0;\n"]))),R=u.d.nav(S||(S=Object(s.a)(["\n   ul {\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: space-between;\n      padding: 0;\n      margin: 0;\n      list-style: none;\n\n      li {\n         margin: .5em 0;\n      }\n   }\n"]))),D=Object(u.d)(g.a)(N||(N=Object(s.a)(["\n   background: rgb(49, 162, 76);\n   color: ",";\n"])),(function(e){return e.theme.palette.text_white})),T=Object(u.d)(g.a)(_||(_=Object(s.a)(["\n   background: hsl(40, 89%, 52%);\n   color: ",";\n"])),(function(e){return e.theme.palette.text_white})),F=function(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)(M,{children:[Object(d.jsx)("h1",{children:"Admin page"}),Object(d.jsx)(T,{onClick:P,type:"button",children:"Logout"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)(R,{className:"admin-nav",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(U.b,{to:"/admin/create",children:Object(d.jsx)(D,{children:"Create"})})}),Object(d.jsx)("li",{}),Object(d.jsx)("li",{children:Object(d.jsx)(g.a,{children:"Posts"})})]})}),Object(d.jsx)("hr",{}),Object(d.jsx)("br",{})]})},L=n(61),B=n(25),Y=n(58),V=n(60),W=n(63),J=u.d.aside(z||(z=Object(s.a)(["\n   margin-top: 1.2em;\n\n   @media (min-width: ","px) {\n      margin-left: 0.8rem;\n      margin-top: 0;\n   }\n"])),B.c.tablet),G=Object(h.memo)((function(){var e=Object(V.a)().posts;return Object(d.jsx)(J,{className:"sidebar",children:Object(d.jsxs)(B.b,{children:[e.length<1?[1,2,3,4].map((function(e,t){return Object(d.jsx)(B.a,{phone:12,children:Object(d.jsx)(Y.a,{margin:"0 0 1em 0",children:Object(d.jsx)("div",{className:"card-container"})})},t)})):e.map((function(e){return Object(d.jsx)(B.a,{phone:12,children:Object(d.jsx)(L.a,Object(p.a)({path:"/admin/update/".concat(e.id),sidebar:!0,margin:"0 0 1em 0"},e))},e.id)})),Object(d.jsx)(B.a,{phone:12,children:Object(d.jsx)(W.a,{})})]})})})),H=function(){var e=Object(x.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.doc("posts/".concat(t)).delete();case 3:n.push("/admin/create"),console.log("deleted post"),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error deleting the post");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),K=n(62),q=n.n(K),Q=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(p.a)(Object(p.a)({},t),{},{date:q()().format("MMM Do YY")}),e.next=4,k.a.doc("".concat(y.a.dbRoot,"/").concat(n)).update(r);case 4:console.log("se actualizo"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error updating post");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),X=Object(u.d)(g.a)(E||(E=Object(s.a)(["\n   background: rgb(240, 40, 73);\n   color: ",";\n   margin: 0.5em auto;\n"])),(function(e){return e.theme.palette.text_white})),Z=Object(h.memo)((function(e){var t=e.post,n=e.postId,r=Object(i.g)(),c={title:t.title,content:t.content,excerpt:t.excerpt,imageUrl:t.imageUrl,featured:"false"},a=m(c),s=Object(o.a)(a,3),u=s[0],l=s[1],b=s[2];return Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),"Update/Delete post screen",Object(d.jsx)("hr",{}),Object(d.jsx)("div",{style:{textAlign:"center"},children:Object(d.jsx)(X,{onClick:function(){H(n,r)},children:"Delete"})}),Object(d.jsx)(w,{formValues:u,handleInputChange:l,submitCallback:Q,resetForm:b,postId:n})]})})),$=n(68),ee=Object(h.memo)((function(){var e=Object(h.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(i.h)();return Object(h.useEffect)((function(){Object($.a)(c.postId).then((function(e){var t=null===e||void 0===e?void 0:e.data();r(t)})),window.scrollTo(0,0)}),[c.postId]),n?Object(d.jsx)("div",{children:Object(d.jsx)(Z,{post:n,postId:c.postId})}):Object(d.jsx)("h3",{children:"Wait loading Post"})})),te=function(){return Object(d.jsx)("div",{children:Object(d.jsxs)(b,{children:[Object(d.jsx)(F,{}),Object(d.jsxs)(B.b,{children:[Object(d.jsx)(B.a,{tablet:8,children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:a.create,component:I}),Object(d.jsx)(i.b,{exact:!0,path:a.update,component:ee}),Object(d.jsx)(i.a,{to:a.create})]})}),Object(d.jsx)(B.a,{tablet:4,children:Object(d.jsx)("div",{style:{marginLeft:".75em"},children:Object(d.jsx)(G,{})})})]})]})})};function ne(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var re,ce,ae,oe,ie=["isAuthenticated","component","path"],se=function(e){var t=e.isAuthenticated,n=e.component,r=(e.path,ne(e,ie));return Object(d.jsx)(i.b,Object(p.a)(Object(p.a)({},r),{},{component:function(e){return t?Object(d.jsx)(n,Object(p.a)({},e)):Object(d.jsx)(i.a,{to:a.login})}}))},ue=["isAuthenticated","component"],de=function(e){var t=e.isAuthenticated,n=e.component,r=ne(e,ue);return Object(d.jsx)(i.b,Object(p.a)(Object(p.a)({},r),{},{component:function(e){return t?Object(d.jsx)(i.a,{to:a.create}):Object(d.jsx)(n,Object(p.a)({},e))}}))},le=u.d.div(re||(re=Object(s.a)(["\n   display: flex;\n   justify-content: center;\n   align-items: center;\n   min-height: 86.6vh;\n"]))),be=u.d.div(ce||(ce=Object(s.a)(["\n   background-color: ",";\n   padding: 1em;\n   border-radius: 6px;\n   box-shadow: ",";\n\n   h3 {\n      text-align: center;\n      margin-bottom: .8em;\n   }\n"])),(function(e){return e.theme.palette.themeMode.navbar_bg}),(function(e){return e.theme.palette.dark?"0 0 4px 2px rgba(255,255,255,.5)":"0 0 4px 2px rgba(0,0,0,.5)"})),je=u.d.input(ae||(ae=Object(s.a)(["\n   font-size: 1.02rem;\n   margin-bottom: .8em;\n"]))),pe=Object(u.d)(g.a)(oe||(oe=Object(s.a)(["\n   width: 100%;\n   margin-bottom: .8em;\n"]))),he=function(){var e=m({email:"",password:""}),t=Object(o.a)(e,2),n=t[0],r=t[1],c=n.email,a=n.password;return Object(d.jsx)(b,{children:Object(d.jsx)(le,{children:Object(d.jsxs)(be,{children:[Object(d.jsx)("h3",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e,t){k.b.auth().signInWithEmailAndPassword(e,t).then().catch((function(e){console.warn("??? bad login")}))}(c,a)},children:[Object(d.jsx)("div",{children:Object(d.jsx)(je,{onChange:r,value:c,autoComplete:"off",type:"email",placeholder:"email",name:"email",id:"email"})}),Object(d.jsx)("div",{children:Object(d.jsx)(je,{onChange:r,value:a,type:"password",placeholder:"password",name:"password",id:"password"})}),Object(d.jsx)("div",{children:Object(d.jsx)(pe,{type:"submit",children:"Login"})})]})]})})})},me=Object(h.memo)((function(){var e=Object(h.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(h.useState)(!1),a=Object(o.a)(c,2),s=a[0],u=a[1];return Object(h.useEffect)((function(){k.b.auth().onAuthStateChanged((function(e){(null===e||void 0===e?void 0:e.uid)?u(!0):u(!1),r(!1)}))}),[]),n?Object(d.jsx)("h2",{style:{paddingTop:"3.5rem"},children:"checking..."}):Object(d.jsxs)(i.d,{children:[Object(d.jsx)(de,{exact:!0,path:"/admin/login",isAuthenticated:s,component:he}),Object(d.jsx)(se,{path:"/admin",isAuthenticated:s,component:te})]})}));t.default=me}}]);
//# sourceMappingURL=4.d3da85d5.chunk.js.map